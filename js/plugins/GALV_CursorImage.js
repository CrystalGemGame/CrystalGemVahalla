var Imported=Imported||{};Imported.Galv_CursorImage=true;var Galv=Galv||{};Galv.pCmd=Galv.pCmd||{};Galv.CI=Galv.CI||{};(function(){Galv.CI.initHidden=PluginManager.parameters("Galv_CursorImage")["Start Hidden"].toLowerCase()==="true"?true:false;Galv.CI.image=PluginManager.parameters("Galv_CursorImage")["Cursor Image"];Galv.CI.frames=Number(PluginManager.parameters("Galv_CursorImage")["Image Frames"]);Galv.CI.animSpeed=Number(PluginManager.parameters("Galv_CursorImage")["Animation Speed"]);Galv.CI.center=PluginManager.parameters("Galv_CursorImage")["Position Centered"].toLowerCase()=="true"?true:false;Galv.CI.cIndent=Number(PluginManager.parameters("Galv_CursorImage")["Command Indent"]);Galv.CI.iIndent=Number(PluginManager.parameters("Galv_CursorImage")["Item Indent"]);var tmp=PluginManager.parameters("Galv_CursorImage")["Position Offset"].split(",");Galv.CI.offset={x:Number(tmp[0]),y:Number(tmp[1])};tmp=null;Galv.CI.Scene_Boot_loadSystemImages=Scene_Boot.loadSystemImages;Scene_Boot.loadSystemImages=function(){Galv.CI.Scene_Boot_loadSystemImages.call(this);ImageManager.loadSystem(Galv.CI.image)};Galv.CI.Game_System_initialize=Game_System.prototype.initialize;Game_System.prototype.initialize=function(){Galv.CI.Game_System_initialize.call(this);this._cursorHidden=Galv.CI.initHidden};Galv.CI.Window_Selectable_initialize=Window_Selectable.prototype.initialize;Window_Selectable.prototype.initialize=function(x,y,width,height){Galv.CI.Window_Selectable_initialize.call(this,x,y,width,height);this.createGalvCursor()};Window_NumberInput.prototype.createGalvCursor=function(){};Window_ShopNumber.prototype.createGalvCursor=function(){};Window_BattleStatus.prototype.createGalvCursor=function(){};Galv.CI.Window_BattleStatus_drawActorName=Window_BattleStatus.prototype.drawActorName;Window_BattleStatus.prototype.drawActorName=function(actor,x,y,width){x+=Galv.CI.iIndent;Galv.CI.Window_BattleStatus_drawActorName.call(this,actor,x,y,width)};Window_Selectable.prototype.createGalvCursor=function(){this._galvCursor=new Sprite_GalvCursor(this);this.addChild(this._galvCursor)};Window_BattleActor.prototype.createGalvCursor=Window_Selectable.prototype.createGalvCursor;Galv.CI.Window_Command_textPadding=Window_Command.prototype.textPadding;Window_Command.prototype.textPadding=function(){return Galv.CI.Window_Command_textPadding.call(this)+Galv.CI.cIndent};Galv.CI.Window_EquipSlot_drawText=Window_EquipSlot.prototype.drawText;Window_EquipSlot.prototype.drawText=function(text,x,y,maxWidth,align){x+=Galv.CI.iIndent;Galv.CI.Window_EquipSlot_drawText.call(this,text,x,y,maxWidth,align)};Galv.CI.Window_Selectable_drawItemName=Window_Selectable.prototype.drawItemName;Window_Selectable.prototype.drawItemName=function(item,x,y,width){x+=Galv.CI.iIndent;Galv.CI.Window_Selectable_drawItemName.call(this,item,x,y,width)};Galv.CI.Window_EquipSlot_drawIcon=Window_EquipSlot.prototype.drawIcon;Window_EquipSlot.prototype.drawIcon=function(iconIndex,x,y){x+=Galv.CI.iIndent;Galv.CI.Window_EquipSlot_drawIcon.call(this,iconIndex,x,y)};function Sprite_GalvCursor(){this.initialize.apply(this,arguments)}Sprite_GalvCursor.prototype=Object.create(Sprite_Base.prototype);Sprite_GalvCursor.prototype.constructor=Sprite_GalvCursor;Sprite_GalvCursor.prototype.initialize=function(window){Sprite_Base.prototype.initialize.call(this);this._window=window;this.createImage();this._ticker=0;this._pattern=0;this.updateFrame()};Sprite_GalvCursor.prototype.createImage=function(){this.bitmap=ImageManager.loadSystem(Galv.CI.image);this._frameWidth=this.bitmap.width/Galv.CI.frames;this._frameHeight=this.bitmap.height;this._maxPattern=Galv.CI.frames-1;this._tickSpeed=Galv.CI.animSpeed;this.anchor.y=.5;this.opacity=0};Sprite_GalvCursor.prototype.update=function(){Sprite_Base.prototype.update.call(this);if(this._window.isCursorVisible()&&!$gameSystem._cursorHidden){this.opacity=this._window.openness>=255?255:0;if(this._window.active)this.updateFrame();this.updatePosition()}else{this.opacity=0}};Sprite_GalvCursor.prototype.updateFrame=function(){var pw=this._frameWidth;var ph=this._frameHeight;var sx=this._pattern*pw;this.setFrame(sx,0,pw,ph);this._ticker+=1;if(this._ticker>=this._tickSpeed){this._pattern=this._pattern==this._maxPattern?0:this._pattern+1;this._ticker=0}};Sprite_GalvCursor.prototype.updatePosition=function(){var rect=this._window._cursorRect;this.y=rect.y+Galv.CI.offset.y+this._window.standardPadding()+this.yPos(rect.height);this.x=rect.x+Galv.CI.offset.x};if(Galv.CI.center){Sprite_GalvCursor.prototype.yPos=function(height){return height/2}}else{Sprite_GalvCursor.prototype.yPos=function(height){return 0}}})();