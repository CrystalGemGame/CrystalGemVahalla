(function(){"use strict";function parseParameters(string){try{return JSON.parse(string,(key,value)=>{try{return parseParameters(value)}catch(e){return value}})}catch(e){return string}}const rawParameters=$plugins.filter(plugin=>plugin.description.contains("<X_SocialMediaButtons>"))[0].parameters;const _Params=parseParameters(JSON.stringify(rawParameters));class SocialMediaButton extends Sprite_Button{constructor(data,x,y){super();super.initialize();this._data=data;this.bitmap=data.src;this.setClickHandler(this.openLink);this._colorMatrix=new PIXI.filters.ColorMatrixFilter;this.filters=[this._colorMatrix];this._isFiltered=false;this._mousePos={}}updateMousePosition(event){this._mousePos.x=event.pageX;this._mousePos.y=event.pageY}update(){super.update()}updateFrame(event){const filter=_Params.onTouchFilter;if(this.isButtonTouching()&&!this._isFiltered){this._colorMatrix[filter.type](filter.value1,filter.value2);this._isFiltered=true;AudioManager.playSe(_Params.onTouchSound)}else if(this._isFiltered&&!this.isButtonTouching()){this._colorMatrix.reset();this._isFiltered=false}}isButtonTouching(){if(!this._mousePos.x||!this._mousePos.y){return false}const x=this.canvasToLocalX(Graphics.pageToCanvasX(this._mousePos.x));const y=this.canvasToLocalY(Graphics.pageToCanvasY(this._mousePos.y));return x>=0&&y>=0&&x<this.width&&y<this.height}setPosition(x,y){this.x=x;this.y=y}openLink(){if(Utils.isNwjs()){try{AudioManager.playSe(_Params.settings.onClickSound);window.nw.Shell.openExternal(this._data.url)}catch(error){console.log(error)}}else if(!Utils.isNwjs()){AudioManager.playSe(_Params.settings.onClickSound);window.open(this._data.link)}}}class SocialMediaContainer extends Sprite{constructor(x,y){super();this._listener=this.processButtonTouching.bind(this);document.addEventListener("mousemove",this._listener);this.createSocialButtons()}createSocialButtons(){let x=0;_Params.buttonsList.forEach(social=>{if(!social){return}const path=social.image.split("/");const data={src:ImageManager.loadBitmap(`img/${path[0]}/`,path[1]),url:social.url};const button=new SocialMediaButton(data,x,0);button.bitmap.addLoadListener(()=>{button.setPosition(x,0);this.addChild(button);x+=_Params.settings.spacing+button.width;this.resize()})})}processButtonTouching(event){this.children.forEach(button=>button.updateMousePosition(event))}setPosition(){const x2=eval(_Params.settings.x);const y2=eval(_Params.settings.y);this.x=x2;this.y=y2-this.getBounds().height;if(this.x+this.getBounds().width>Graphics.boxWidth){this.x=x2-this.getBounds().width}}resize(){this.calculateBounds();this.setPosition()}removeListener(){document.removeEventListener("mousemove",this._listener)}}const Alias_SceneTitle_create=Scene_Title.prototype.create;Scene_Title.prototype.create=function(){Alias_SceneTitle_create.call(this);this.createSocialContainer()};Scene_Title.prototype.createSocialContainer=function(){this._socialMediaContainer=new SocialMediaContainer;this.addChild(this._socialMediaContainer)};const Alias_SceneTitle_terminate=Scene_Title.prototype.terminate;Scene_Title.prototype.terminate=function(){Alias_SceneTitle_terminate.call(this);this._socialMediaContainer.removeListener()}})();